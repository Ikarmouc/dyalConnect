<?php

namespace App\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class InfoExploitationTest extends WebTestCase
{
    /**
     * Fonction de test de route pour la page Exploitation infos
     */
    public function testRoute()
    {
        $client = static::createClient();
        $client->request("GET", "/exploitation/1");
        $this->assertEquals(200, $client->getResponse()->getStatusCode());
    }

    /**
     * Fonction de test obtention infos exploitation depuis le site :
     * On teste si un des elements des infos exploitation peut etre affichée correctement ce qui va donc
     * montrer le bon fonctionnement du lien entre la base de données et le controller
     */
    public function testWebSite()
    {

        $client = static::createClient();

        $client->request('GET', '/exploitation/1/');

        $this->assertEquals(200, $client->getResponse()->getStatusCode());


        $this->assertSelectorTextContains('html body div div p', 'Nom du producteur : Dupres');


    }

    /**
     * Cette methode va verifier si le contenu des informations de l'exploitation
     * est bien chargé sur le site, s'il arrive a afficher le nom producteur alors les
     * autres elements fonctionnerons car fonctionnent d'une maniere similiaire a celui-ci
     */
    public function testContenuInfosExploitation()
    {
        $client = static::createClient();

        $client->request('GET', '/exploitation/1/');

        $this->assertEquals(200, $client->getResponse()->getStatusCode());

        $this->assertSelectorTextContains('html body div div p', 'Nom du producteur : Dupres');

    }

}
